<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="../img/logo.png">
    <title>Password</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style>
    body {
      background-image: url(../img/logo.png);
      background-repeat: no-repeat;
      background-color: black;
      background-size: 200px 200px;
      background-attachment: fixed;
    } 

    * {
        padding: 0px;
        margin: 0px;
        font-family: 'Times New Roman', Times, serif;
        color: whitesmoke;
    }

    div {
        background-color: whitesmoke;
        margin: 5% auto;
        width: 80%;
        max-width: 400px;
        padding: 20px;
        border-radius: 30px;
        margin-top: 300px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    } 

    h1 {
        text-align: center;
        color: black;
        margin-bottom: 30px;
    }

    input {
        display: block;
        width: 80%;
        padding: 10px;
        border-radius: 30px;
        margin: 0 auto 20px auto;
        color: black;
        border: 1px solid gray;
    }

    button {
        color: black;
        border-radius: 30px;
        padding: 10px 15px;
        display: block;
        margin: 0 auto;
        border: 1px solid gray;
        cursor: pointer;
    }

    button:hover {
      color: green;
    }

    button:active {
      color: red;
    }

    /* Responsive styles */
    @media (max-width: 600px) {
        div {
            width: 90%;
        }

        input, button {
            width: 90%;
        }
    }

</style>
<body>
   <div>
     <h1>Set a New Password</h1>
    <input type="password" required placeholder="Enter the New Password">
    <input type="password" required placeholder="Re-Enter the New Password"><br>
    <a href="../index.html"><button>Set It</button></a>
   </div>
   <script>
    document.querySelector("button").addEventListener("click", function(event) {
    event.preventDefault(); // Prevent the default anchor behavior
    const newPassword = document.querySelector("input[type='password']").value;
    const confirmPassword = document.querySelectorAll("input[type='password']")[1].value;

    // Strong password validation regex
    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

    // Validation checks
    if (newPassword === "" || confirmPassword === "") {
        alert("Please fill in all fields.");
    } else if (newPassword !== confirmPassword) {
        alert("Passwords do not match.");
    } else if (!passwordRegex.test(newPassword)) {
        alert("Password must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, one number, and one special character.");
    } else {
        alert("Password has been set!");
        // Optionally, clear OTP from storage
        localStorage.removeItem("otp");
        // Redirect to index page
        window.location.href = "../index.html"; 
    }
});

   </script>
</body>
</html>
